<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LOTSA-WAIFUS|MERMAY</title>
	<link rel="icon" href="/favicon.ico?v=2" sizes="any">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<link rel="manifest" href="manifest.json">
	<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Chewy&family=Bubblegum+Sans&display=swap" rel="stylesheet">
	<!-- CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<!-- JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<style>
		* {box-sizing: border-box;}

body {background: linear-gradient(to right, #9FFFCB, white);}

main {display: flex; flex-direction: column; margin: 0 auto;
	min-height: 100vh; justify-content: space-around;
	padding-top: 50px;}

.custom-font {
	font-family: 'Chewy', cursive;
}

.nav-link:hover {
	transform: scale(1.1);
	transition: transform 0.3s ease;
}

.navbar-brand {color: white;}

/* Navbar H1 Title */
.navbar-title {
	font-family: 'Chewy', cursive;
	font-size: 1.8rem;
	color: white;
	margin: 0;
	position: absolute;
	left: 50%;
	transform: translateX(-50%);
}

/* Featured Image Display */
.featured-image {
	height: 500px;
	width: 500px;
	margin: 0 auto;
	border-radius: 20px;
	overflow: hidden;
	box-shadow: 0 20px 50px rgba(0,0,0,0.3);
	z-index: 4000;
}

.featured-image img {
	width: 100%;
	height: 100%;
	display: block;
	object-fit: cover;
	object-position: 50% 14%;
	transition: all 0.4 ease;
}

/* Thumbnail Carousel */
.thumbnail-carousel {
	max-width: 900px;
	margin: 0 auto;
}

.thumbnail-item {
	width: 90px;
	height: 120px;
	border-radius: 10px;
	overflow: hidden;
	margin: 0 8px;
	cursor: pointer;
	border: 2px solid transparent;
	transition: all 0.4s ease;
}

.thumbnail-item.active {
	border-color: #ff6bcd;
	transform: scale(1.4);
}

.thumbnail-item:hover {
	transform: scale(1.2);
	border-color: #9FFFCB;
}

.thumbnail-item.active, 
.thumbnail-item.active:hover {
	border-color: #ff6bcd;
	transform: scale(1.4);
}

.thumbnail-item img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

/* Lightbox Styles */
.lightbox {
	display: none;
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: rgba(0, 0, 0, 0.9);
	z-index: 9999;
	justify-content: center;
	align-items: center;
}

.lightbox-image {
	max-width: 90%;
	max-height: 90%;
	object-fit: contain;
	border-radius: 10px;
	transition: transform 0.3s ease;
	cursor: zoom-in; /* Default: plus sign */
	transform-origin: center center;
}

.lightbox-image.zoom-out {
	cursor: zoom-out; /* Minus sign when shift is held */
}

.lightbox-close {
	position: absolute;
	top: 20px;
	right: 30px;
	color: white;
	font-size: 40px;
	font-weight: bold;
	cursor: pointer;
	z-index: 10000;
}

.lightbox-close:hover {
	color: #ff6bcd;
}

.lightbox-caption {
	position: absolute;
	bottom: 20px;
	color: white;
	text-align: center;
	font-family: 'Chewy', cursive;
}

.featured-image {
	cursor: zoom-in; /* Shows it's clickable */
}
	</style>
</head>

<body>
	<main>
		<!-- NAVBAR WITH INTEGRATED H1 -->
		<nav class="navbar navbar-expand-lg fixed-top" 
				style="background: linear-gradient(45deg, #073B4C, #118AB2);">
		    <div class="container position-relative">
		        <a class="navbar-brand custom-font" href="index.html">LOTSA WAIFUS</a>
		        <h1 class="navbar-title custom-font">MERMAY</h1>
		        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
		            <span class="navbar-toggler-icon"></span>
		        </button>
		        <div class="collapse navbar-collapse" id="navbarNav">
		            <ul class="navbar-nav ms-auto">
		                <li class="nav-item">
		                    <a class="nav-link custom-font" href="#">Gallery</a>
		                </li>
		                <li class="nav-item">
		                    <a class="nav-link custom-font" href="#">Shop</a>
		                </li>
		                <li class="nav-item">
		                    <a class="nav-link custom-font" href="#">About</a>
		                </li>
		            </ul>
		        </div>
		    </div>
		</nav>

		<!-- Featured Image Display -->
		<div class="featured-image">
			<img id="featuredImg" src="WAIFUS-IMG/COZY.avif" alt="Featured Waifu">
		</div>

		<!-- Thumbnail Carousel -->
		<div class="thumbnail-carousel">
			<div class="d-flex justify-content-center flex-wrap gap-3">
				<div class="thumbnail-item active" onclick="changeFeatured('WAIFUS-IMG/COZY 1200x800.avif', '50% 14%')">
					<img src="WAIFUS-IMG/COZY 1200x800.avif" alt="Waifu 1">
				</div>
				<div class="thumbnail-item" onclick="changeFeatured('WAIFUS-IMG/OCTO 1200x900.avif', '50% 33%')">
					<img src="WAIFUS-IMG/OCTO 1200x900.avif" alt="Waifu 2">
				</div>
				<div class="thumbnail-item" onclick="changeFeatured('WAIFUS-IMG/MOTHWOMAN 1200x856.avif', '50% 46%')">
					<img src="WAIFUS-IMG/MOTHWOMAN 1200x856.avif" alt="Waifu 3">
				</div>
				<div class="thumbnail-item" onclick="changeFeatured('WAIFUS-IMG/BRAINPOWER 1200x900.avif', '50% 44%')">
					<img src="WAIFUS-IMG/BRAINPOWER 1200x900.avif" alt="Waifu 4">
				</div>
				<div class="thumbnail-item" onclick="changeFeatured('WAIFUS-IMG/PET 1200x900.avif', '50% 26%')">
					<img src="WAIFUS-IMG/PET 1200x900.avif" alt="Waifu 5">
				</div>
				<div class="thumbnail-item" onclick="changeFeatured('WAIFUS-IMG/DIAMOND 1200x900.avif', '50% 32%')">
					<img src="WAIFUS-IMG/DIAMOND 1200x900.avif" alt="Waifu 6">
				</div>
			</div>
		</div>
	</main>

	<!-- Lightbox Modal -->
	<div id="lightbox" class="lightbox">
		<span class="lightbox-close">&times;</span>
		<img class="lightbox-image" id="lightboxImg">
		<div class="lightbox-caption" id="lightboxCaption"></div>
	</div>

	<script>
// Thumbnail click functionality
document.querySelectorAll('.thumbnail-item').forEach(thumb => {
    thumb.addEventListener('click', function() {
        const imageSrc = this.getAttribute('data-image');
        const cropPosition = this.getAttribute('data-crop') || '50% 14%';
        
        const featuredImg = document.getElementById('featuredImg');
        featuredImg.src = imageSrc;
        featuredImg.style.objectPosition = cropPosition;
        
        // Update active thumbnail
        document.querySelectorAll('.thumbnail-item').forEach(item => {
            item.classList.remove('active');
        });
        this.classList.add('active');
    });
});

// Set first thumbnail as active by default on page load
document.addEventListener('DOMContentLoaded', function() {
    const firstThumb = document.querySelector('.thumbnail-item');
    if (firstThumb) {
        firstThumb.classList.add('active');
    }
});

// Lightbox functionality
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightboxImg');
const lightboxCaption = document.getElementById('lightboxCaption');

let currentZoomLevel = 1;
const MAX_ZOOM = 1.0; // 100% = ACTUAL PIXELS
const MIN_ZOOM = 0.1;

// Lightbox drag-to-pan functionality
let isDragging = false;
let startX, startY;
let currentTranslateX = 0;
let currentTranslateY = 0;

function setZoomLevel(zoomLevel) {
    const imgNaturalWidth = lightboxImg.naturalWidth;
    const imgNaturalHeight = lightboxImg.naturalHeight;
    
    // Calculate actual display dimensions based on zoom level
    const displayWidth = imgNaturalWidth * zoomLevel;
    const displayHeight = imgNaturalHeight * zoomLevel;
    
    // Set the actual dimensions (not using scale())
    lightboxImg.style.width = displayWidth + 'px';
    lightboxImg.style.height = displayHeight + 'px';
    lightboxImg.style.maxWidth = 'none';
    lightboxImg.style.maxHeight = 'none';
    
    // Reset position on zoom
    currentTranslateX = 0;
    currentTranslateY = 0;
    lightboxImg.style.transform = 'translate(0px, 0px)';
    
    currentZoomLevel = zoomLevel;
    
    console.log(`üîç Zoom: ${(zoomLevel * 100).toFixed(0)}% | Display: ${Math.round(displayWidth)}x${Math.round(displayHeight)}px`);
    
    if (zoomLevel === 1.0) {
        console.log("üéØ MAX ZOOM - VIEWING AT 100% - ACTUAL PIXEL RESOLUTION");
    }
    
    // Update cursor based on zoom level
    updateLightboxCursor();
}

function getFitToScreenZoom() {
    const imgNaturalWidth = lightboxImg.naturalWidth;
    const imgNaturalHeight = lightboxImg.naturalHeight;
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    
    // Calculate zoom to fit image VERTICALLY with 10% margin
    const verticalZoom = (viewportHeight * 0.9) / imgNaturalHeight;
    
    // Also check horizontal fit to ensure it doesn't overflow
    const horizontalZoom = (viewportWidth * 0.9) / imgNaturalWidth;
    
    // Use the SMALLER zoom to ensure the entire image fits on screen
    let zoom = Math.min(verticalZoom, horizontalZoom);
    
    return zoom;
}

function updateLightboxCursor() {
    if (isDragging) {
        lightboxImg.style.cursor = 'grabbing';
    } else if (lightboxImg.classList.contains('zoom-out')) {
        lightboxImg.style.cursor = 'zoom-out';
    } else {
        lightboxImg.style.cursor = 'zoom-in'; // Default lens icon
    }
}

function closeLightbox() {
    lightbox.style.display = 'none';
    document.body.style.overflow = 'auto';
    // Reset image styles for next open
    lightboxImg.style.width = '';
    lightboxImg.style.height = '';
    lightboxImg.style.maxWidth = '';
    lightboxImg.style.maxHeight = '';
    lightboxImg.style.transform = '';
    lightboxImg.style.cursor = 'zoom-in';
    
    // Reset drag state
    isDragging = false;
    currentTranslateX = 0;
    currentTranslateY = 0;
}

// Click featured image to open lightbox
document.getElementById('featuredImg').addEventListener('click', function() {
    // Get the high-res image from the active thumbnail's data-highres attribute
    const activeThumb = document.querySelector('.thumbnail-item.active');
    const highResSrc = activeThumb.getAttribute('data-highres') || this.src;
    
    lightboxImg.src = highResSrc; 
    
    lightboxImg.onload = function() {
        const fitZoom = getFitToScreenZoom();
        
        console.log(`üñºÔ∏è Image: ${lightboxImg.naturalWidth}x${lightboxImg.naturalHeight}px`);
        console.log(`üñ•Ô∏è  Viewport: ${window.innerWidth}x${window.innerHeight}px`);
        console.log(`üîç Initial view: ${(fitZoom * 100).toFixed(1)}% (fit to screen)`);
        console.log(`üéØ Max zoom (100%): ${lightboxImg.naturalWidth}x${lightboxImg.naturalHeight}px`);
        
        setZoomLevel(fitZoom);
    };

    lightbox.style.display = 'flex';
    document.body.style.overflow = 'hidden';
});

// Close lightbox when clicking X button
document.querySelector('.lightbox-close').addEventListener('click', closeLightbox);

// Close lightbox when clicking background
lightbox.addEventListener('click', function(e) {
    if (e.target === lightbox) {
        closeLightbox();
    }
});

// Close with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeLightbox();
    }
});

// Update cursor based on Shift key in real-time
document.addEventListener('keydown', function(e) {
    if (e.key === 'Shift') {
        lightboxImg.classList.add('zoom-out');
        updateLightboxCursor();
    }
});

document.addEventListener('keyup', function(e) {
    if (e.key === 'Shift') {
        lightboxImg.classList.remove('zoom-out');
        updateLightboxCursor();
    }
});

// LEFT-CLICK HOLD DRAG-TO-PAN FUNCTIONALITY
lightboxImg.addEventListener('mousedown', function(e) {
    // Only start dragging on LEFT CLICK (button 0) and if zoomed in
    if (e.button === 0 && currentZoomLevel > getFitToScreenZoom()) {
        isDragging = true;
        startX = e.clientX - currentTranslateX;
        startY = e.clientY - currentTranslateY;
        updateLightboxCursor();
        e.preventDefault();
    }
});

lightboxImg.addEventListener('mousemove', function(e) {
    if (!isDragging) return;
    
    e.preventDefault();
    
    // Calculate new position
    currentTranslateX = e.clientX - startX;
    currentTranslateY = e.clientY - startY;
    
    // Apply transform
    lightboxImg.style.transform = `translate(${currentTranslateX}px, ${currentTranslateY}px)`;
});

lightboxImg.addEventListener('mouseup', function(e) {
    // Stop dragging on LEFT MOUSE release
    if (isDragging && e.button === 0) {
        isDragging = false;
        updateLightboxCursor();
    }
});

lightboxImg.addEventListener('mouseleave', function() {
    if (isDragging) {
        isDragging = false;
        updateLightboxCursor();
    }
});

// CLICK ZOOM FUNCTIONALITY (now requires Shift key for all zooming)
lightboxImg.addEventListener('click', function(e) {
    // Only handle clicks when NOT dragging and with Shift key
    if (!isDragging && e.shiftKey) {
        e.stopPropagation();
        
        if (e.shiftKey) {
            // Shift + Click = ZOOM OUT
            const newZoom = Math.max(currentZoomLevel - 0.2, MIN_ZOOM);
            setZoomLevel(newZoom);
            console.log(`üîç Zoomed OUT to ${(newZoom * 100).toFixed(0)}%`);
        }
    }
});

// Add keyboard shortcuts
document.addEventListener('keydown', function(e) {
    if (lightbox.style.display === 'flex') {
        if (e.key === '1') {
            // Press '1' to jump directly to 100% (max zoom)
            setZoomLevel(1.0);
            console.log("üéØ Jumped to 100% - ACTUAL PIXELS");
            e.preventDefault();
        } else if (e.key === '0') {
            // Press '0' to jump to fit screen (initial view)
            const fitZoom = getFitToScreenZoom();
            setZoomLevel(fitZoom);
            console.log("üñºÔ∏è Jumped to fit screen");
            e.preventDefault();
        } else if (e.key === 'Shift') {
            // Shift key already handled above for cursor change
        } else if (e.key === '+' || e.key === '=') {
            // + key to zoom in
            const newZoom = Math.min(currentZoomLevel + 0.2, MAX_ZOOM);
            setZoomLevel(newZoom);
            console.log(`üîç Zoomed IN to ${(newZoom * 100).toFixed(0)}%`);
            e.preventDefault();
        } else if (e.key === '-' || e.key === '_') {
            // - key to zoom out
            const newZoom = Math.max(currentZoomLevel - 0.2, MIN_ZOOM);
            setZoomLevel(newZoom);
            console.log(`üîç Zoomed OUT to ${(newZoom * 100).toFixed(0)}%`);
            e.preventDefault();
        }
    }
});
	</script>
</body>
</html>