<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LOTSA-WAIFUS|STUDIES</title>
	<link rel="icon" href="/favicon.ico?v=2" sizes="any">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<link rel="manifest" href="manifest.json">
	<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Chewy&family=Bubblegum+Sans&display=swap" rel="stylesheet">
	<!-- CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<!-- JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<style>
		* {box-sizing: border-box;}

	body {
	    background: linear-gradient(to right, #e3f2fd, #f3e5f5); 
	}

	main {display: flex; flex-direction: column; margin: 0 auto;
		min-height: 100vh; justify-content: space-around;
		padding-top: 50px;}

	.custom-font { 
    font-family: 'Fredoka One', cursive;
	}

	.navbar {
	    background: linear-gradient(45deg, #37474f, #546e7a) !important; /* Darker, more serious */
	}

	.nav-link:hover {
		transform: scale(1.1);
		transition: transform 0.3s ease;
	}

	.navbar-brand {color: white;}

	/* Navbar H1 Title */
	.navbar-title {
		font-size: 1.8rem;
		color: white;
		margin: 0;
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
	}

	/* Featured Image Display */
	.featured-image {
	    height: 500px;
	    width: 500px;
	    margin: 0 auto;
	    border-radius: 12px; /* Slightly less rounded */
	    overflow: hidden;
	    box-shadow: 0 10px 30px rgba(0,0,0,0.15); /* Softer shadow */
	    border: 1px solid #e0e0e0; /* Subtle border */
	    z-index: 4000;
	}

	.featured-image img {
		width: 100%;
		height: 100%;
		display: block;
		object-fit: cover;
		object-position: 50% 14%;
		transition: all 0.4 ease;
	}

	/* Thumbnail Carousel */
	.thumbnail-carousel {
		max-width: 900px;
		margin: 0 auto;
	}

	.thumbnail-item {
	    width: 90px;
	    height: 120px;
	    border-radius: 8px; /* Less bubbly */
	    overflow: hidden;
	    margin: 0 8px;
	    cursor: pointer;
	    border: 2px solid transparent;
	    transition: all 0.3s ease;
	}


	.thumbnail-item.active {
	    border-color: #5c6bc0; 
	    transform: scale(1.3);
	}

	.thumbnail-item:hover {
	    transform: scale(1.15);
	    border-color: #90a4ae; 
	}

	.thumbnail-item.active, 
	.thumbnail-item.active:hover {
		border-color: #5c6bc0;
		transform: scale(1.4);
	}

	.thumbnail-item img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	/* Lightbox Styles */
	.lightbox {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.85); /* Less intense overlay */
		z-index: 9999;
		justify-content: center;
		align-items: center;
	}

	.lightbox-image {
		max-width: 90%;
		max-height: 90%;
		object-fit: contain;
		border-radius: 8px;
	    box-shadow: 0 15px 35px rgba(0,0,0,0.25);
		transition: transform 0.3s ease;
		cursor: zoom-in; /* Default: plus sign */
		transform-origin: center center;
	}

	.lightbox-image.zoom-out {
		cursor: zoom-out; /* Minus sign when shift is held */
	}

	.lightbox-close {
		position: absolute;
		top: 20px;
		right: 30px;
		color: white;
		font-size: 40px;
		font-weight: bold;
		cursor: pointer;
		z-index: 10000;
	}

	.lightbox-close:hover {
		color: #ff6bcd;
	}

	.lightbox-caption {
		position: absolute;
		bottom: 20px;
		color: white;
		text-align: center;
		font-family: 'Chewy', cursive;
	}

	.featured-image {
		cursor: zoom-in; /* Shows it's clickable */
	}

    .controls-footer {
    display: none;
    position: fixed;
    left: 40px; /* Simple left margin */
    top: 50%; /* Center vertically */
    transform: translateY(-50%); /* Adjust for element height */
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 20px;
    border-radius: 12px;
    max-width: 320px;
    line-height: 2.6rem;
    z-index: 10000;
}

.controls-footer.visible {
    display: block;
}

.controls-footer.hidden {
    display: none;
}

.controls-footer .controls-line {
    margin: 2px 0;
}

/* Keyboard key style */
kbd {
    background: #555;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 1.1rem;
    border: 1px solid #777;
    margin: 0 2px;
}

/* Gallery Navigation Arrows */
.gallery-nav {
    position: relative;
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
}

.gallery-nav-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.7);
    color: white;
    border: none;
    font-size: 32px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    opacity: 0.8;
}

.gallery-nav-arrow:hover {
    background: rgba(0, 0, 0, 0.9);
    opacity: 1;
    transform: translateY(-50%) scale(1.1);
}

.gallery-prev {
    left: -70px; /* Position left of the featured image */
}

.gallery-next {
    right: -70px; /* Position right of the featured image */
}

/* Adjust for smaller screens */
@media (max-width: 768px) {
    .gallery-nav-arrow {
        width: 40px;
        height: 40px;
        font-size: 24px;
    }
    
    .gallery-prev {
        left: -50px;
    }
    
    .gallery-next {
        right: -50px;
    }
}

@media screen and (min-device-width: 1366px) and (min-aspect-ratio: 16/9) {
    main {
        justify-content: space-around;
        padding-top: 70px;
        gap: 20px;
    }

    .featured-image-container {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0 auto;
        max-width: 600px;
    }

    
    .featured-image {
        height: 390px;
        width: 440px;
        margin: 0 auto;
    }

    .featured-image img[src*="SDY2-M"] {
        object-position: 50% 10% !important;
    }

    .featured-image img[src*="SDY3-M"] {
        object-position: 50% 6% !important;
    }

    .featured-image img[src*="SDY4-M"] {
        object-position: 50% 8% !important;
    }

    .featured-image img[src*="SDY5-M"] {
        object-position: 50% 2% !important;
    }

    .featured-image img[src*="SDY6-M"] {
        object-position: 50% 6% !important;
    }

    .featured-image img[src*="SDY7-M"] {
        object-position: 50% 6% !important;
    }

    .thumbnail-carousel {
        margin: 0 auto;
    }

    .thumbnail-item {
        height: 100px;
    }

    .thumbnail-item.active {
        border-color: #5c6bc0;
        transform: scale(1.2);
    }

    .thumbnail-item:hover {
        transform: scale(1.10);
        border-color: #90a4ae;
    }

    .thumbnail-item.active, 
    .thumbnail-item.active:hover {
        border-color: #ff6bcd;
        transform: scale(1.2);
    }
}


/* Controls Footer - Lightbox Only */

	</style>
</head>

<!-- BODYBODYBODY --><!-- BODYBODYBODY -->
<!-- BODYBODYBODY --><!-- BODYBODYBODY -->
<!-- BODYBODYBODY --><!-- BODYBODYBODY -->

<body>
	<main>
		<!-- NAVBAR WITH INTEGRATED H1 -->
		<nav class="navbar navbar-expand-lg fixed-top" 
				style="background: linear-gradient(45deg, #073B4C, #118AB2);">
		    <div class="container position-relative">
		        <a class="navbar-brand custom-font" href="index.html">LOTSA WAIFUS</a>
		        <h1 class="navbar-title custom-font">STUDIES</h1>
		        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
		            <span class="navbar-toggler-icon"></span>
		        </button>
		        <div class="collapse navbar-collapse" id="navbarNav">
		            <ul class="navbar-nav ms-auto">
		                <li class="nav-item">
		                    <a class="nav-link custom-font" href="#">Gallery</a>
		                </li>
		                <li class="nav-item">
		                    <a class="nav-link custom-font" href="#">Shop</a>
		                </li>
		                <li class="nav-item">
		                    <a class="nav-link custom-font" href="#">About</a>
		                </li>
		            </ul>
		        </div>
		    </div>
		</nav>

		<!-- CARRO CARRO CARRO -->
		<!-- CARRO CARRO CARRO -->

		


    <!-- NAVBAR WITH INTEGRATED H1 -->
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg fixed-top" 
            style="background: linear-gradient(45deg, #073B4C, #118AB2);">
        <!-- ... your existing navbar ... -->
    </nav>

    <!-- Featured Image Container with Navigation -->
    <div class="featured-image-container">
        <!-- ADD ARROWS INSIDE THE FEATURED IMAGE CONTAINER -->
        <button class="gallery-nav-arrow gallery-prev" title="Previous image (←)">‹</button>
        <button class="gallery-nav-arrow gallery-next" title="Next image (→)">›</button>
        
        <div class="featured-image">
            <img id="featuredImg" src="WAIFUS-IMG/STUDIES-IMG/SDY2-M.avif" alt="Featured Waifu">
        </div>
    </div>
        <!-- Thumbnail Carousel -->
		<div class="thumbnail-carousel">
			<div class="d-flex justify-content-center flex-wrap gap-3">
				<div class="thumbnail-item" 
				     data-image="WAIFUS-IMG/STUDIES-IMG/SDY2-M.avif"
				     data-crop="50% 14%"
				     data-highres="WAIFUS-IMG/STUDIES-IMG/SDY2.avif">
				    <img src="WAIFUS-IMG/STUDIES-IMG/SDY2-S.avif" alt="Waifu 1">
				</div>
				<div class="thumbnail-item" 
				     data-image="WAIFUS-IMG/STUDIES-IMG/SDY3-M.avif"
				     data-crop="50% 22%"
				     data-highres="WAIFUS-IMG/STUDIES-IMG/SDY3.avif">
				    <img src="WAIFUS-IMG/STUDIES-IMG/SDY3-S.avif" alt="Waifu 1">
				</div>
				<div class="thumbnail-item" 
				     data-image="WAIFUS-IMG/STUDIES-IMG/SDY4-M.avif"
				     data-crop="50% 22%"
				     data-highres="WAIFUS-IMG/STUDIES-IMG/SDY4.avif">
				    <img src="WAIFUS-IMG/STUDIES-IMG/SDY4-S.avif" alt="Waifu 1">
				</div>
				<div class="thumbnail-item" 
				     data-image="WAIFUS-IMG/STUDIES-IMG/SDY5-M.avif"
				     data-crop="50% 14%"
				     data-highres="WAIFUS-IMG/STUDIES-IMG/SDY5.avif">
				    <img src="WAIFUS-IMG/STUDIES-IMG/SDY5-S.avif" alt="Waifu 1">
				</div>
				<div class="thumbnail-item" 
				     data-image="WAIFUS-IMG/STUDIES-IMG/SDY6-M.avif"
				     data-crop="50% 18%"
				     data-highres="WAIFUS-IMG/STUDIES-IMG/SDY6.avif">
				    <img src="WAIFUS-IMG/STUDIES-IMG/SDY6-S.avif" alt="Waifu 1">
				</div>
				<div class="thumbnail-item" 
				     data-image="WAIFUS-IMG/STUDIES-IMG/SDY7-M.avif"
				     data-crop="50% 32%"
				     data-highres="WAIFUS-IMG/STUDIES-IMG/SDY7.avif">
				    <img src="WAIFUS-IMG/STUDIES-IMG/SDY7-S.avif" alt="Waifu 1">
				</div>
			</div>
		</div>

	</main>

	<!-- Lightbox Modal -->
	<div id="lightbox" class="lightbox">
		<span class="lightbox-close">&times;</span>
		<img class="lightbox-image" id="lightboxImg">
		<div class="lightbox-caption" id="lightboxCaption"></div>
	</div>

	<!-- Controls Footer -->
	<div id="controlsFooter" class="controls-footer">
    <div class="controls-line"><kbd>RIGHT CLICK</kbd> = ZOOM</div>
    <div class="controls-line"><kbd>SHIFT + CLICK</kbd> = ZOOM OUT</div>
    <div class="controls-line"><kbd>HOLD+DRAG</kbd> = PAN</div>
    <div class="controls-line"><kbd>1</kbd>/<kbd>0</kbd> = 100%/fit</div>
    <div class="controls-line"><kbd>+</kbd>/<kbd>-</kbd> = ZOOM</div>
    <div class="controls-line"><kbd>H</kbd> = HIDE HELP</div>
    </div>

	<script>
    // Thumbnail click functionality with double-click support
document.querySelectorAll('.thumbnail-item').forEach(thumb => {
    let clickTimer = null;
    
    thumb.addEventListener('click', function() {
        if (clickTimer === null) {
            // First click - set timer
            clickTimer = setTimeout(() => {
                // Single click behavior
                const imageSrc = this.getAttribute('data-image');
                const cropPosition = this.getAttribute('data-crop') || '50% 14%';
                
                const featuredImg = document.getElementById('featuredImg');
                featuredImg.src = imageSrc;
                featuredImg.style.objectPosition = cropPosition;
                
                // Update active thumbnail
                document.querySelectorAll('.thumbnail-item').forEach(item => {
                    item.classList.remove('active');
                });
                this.classList.add('active');
                
                clickTimer = null;
            }, 300); // 300ms delay to detect double-click
        }
    });
    
    thumb.addEventListener('dblclick', function(e) {
        // Double click - open lightbox
        e.preventDefault();
        clearTimeout(clickTimer);
        clickTimer = null;
        
        // Update active thumbnail first
        document.querySelectorAll('.thumbnail-item').forEach(item => {
            item.classList.remove('active');
        });
        this.classList.add('active');
        
        // Open lightbox with this image
        const featuredImg = document.getElementById('featuredImg');
        const highResSrc = this.getAttribute('data-highres') || featuredImg.src;
        
        lightboxImg.src = highResSrc; 
        
        lightboxImg.onload = function() {
            const fitZoom = getFitToScreenZoom();
            setZoomLevel(fitZoom);
            
            // Show controls if not hidden
            if (localStorage.getItem('controlsVisible') !== 'false') {
                document.getElementById('controlsFooter').classList.add('visible');
                controlsVisible = true;
            }
        };

        lightbox.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    });
});

// Set first thumbnail as active by default on page load
document.addEventListener('DOMContentLoaded', function() {
    const firstThumb = document.querySelector('.thumbnail-item');
    if (firstThumb) {
        firstThumb.classList.add('active');
    }
});

// Lightbox functionality
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightboxImg');
const lightboxCaption = document.getElementById('lightboxCaption');

let currentZoomLevel = 1;
const MAX_ZOOM = 1.0;
const MIN_ZOOM = 0.1;

// Lightbox drag-to-pan functionality
let isDragging = false;
let dragStartX, dragStartY;
let currentTranslateX = 0;
let currentTranslateY = 0;

function setZoomLevel(zoomLevel) {
    const imgNaturalWidth = lightboxImg.naturalWidth;
    const imgNaturalHeight = lightboxImg.naturalHeight;
    
    const displayWidth = imgNaturalWidth * zoomLevel;
    const displayHeight = imgNaturalHeight * zoomLevel;
    
    lightboxImg.style.width = displayWidth + 'px';
    lightboxImg.style.height = displayHeight + 'px';
    lightboxImg.style.maxWidth = 'none';
    lightboxImg.style.maxHeight = 'none';
    
    // Reset position on zoom
    currentTranslateX = 0;
    currentTranslateY = 0;
    lightboxImg.style.transform = 'translate(0px, 0px)';
    
    currentZoomLevel = zoomLevel;
    
    console.log(`🔍 Zoom: ${(zoomLevel * 100).toFixed(0)}%`);
    
    updateLightboxCursor();
}

function getFitToScreenZoom() {
    const imgNaturalWidth = lightboxImg.naturalWidth;
    const imgNaturalHeight = lightboxImg.naturalHeight;
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    
    const verticalZoom = (viewportHeight * 0.9) / imgNaturalHeight;
    const horizontalZoom = (viewportWidth * 0.9) / imgNaturalWidth;
    
    return Math.min(verticalZoom, horizontalZoom);
}

function updateLightboxCursor() {
    if (isDragging) {
        lightboxImg.style.cursor = 'grabbing';
    } else if (lightboxImg.classList.contains('zoom-out')) {
        lightboxImg.style.cursor = 'zoom-out';
    } else {
        lightboxImg.style.cursor = 'zoom-in';
    }
}

function closeLightbox() {
    lightbox.style.display = 'none';
    document.body.style.overflow = 'auto';
    
    // Reset image styles
    lightboxImg.style.width = '';
    lightboxImg.style.height = '';
    lightboxImg.style.maxWidth = '';
    lightboxImg.style.maxHeight = '';
    lightboxImg.style.transform = '';
    lightboxImg.style.cursor = 'zoom-in';
    
    // Reset drag state
    isDragging = false;
    currentTranslateX = 0;
    currentTranslateY = 0;
    
    // Hide controls when lightbox closes
    document.getElementById('controlsFooter').classList.remove('visible');
}

// Navigation function
function navigateThumbnails(direction) {
    const thumbs = document.querySelectorAll('.thumbnail-item');
    const currentActive = document.querySelector('.thumbnail-item.active');
    let currentIndex = Array.from(thumbs).indexOf(currentActive);
    
    // Calculate new index
    let newIndex = currentIndex + direction;
    if (newIndex < 0) newIndex = thumbs.length - 1; // Wrap to last
    if (newIndex >= thumbs.length) newIndex = 0; // Wrap to first
    
    // Update active thumbnail and featured image
    const newThumb = thumbs[newIndex];
    const imageSrc = newThumb.getAttribute('data-image');
    const cropPosition = newThumb.getAttribute('data-crop') || '50% 14%';
    
    // Update featured image
    const featuredImg = document.getElementById('featuredImg');
    featuredImg.src = imageSrc;
    featuredImg.style.objectPosition = cropPosition;
    
    // Update active states
    thumbs.forEach(thumb => thumb.classList.remove('active'));
    newThumb.classList.add('active');
    
    console.log(`🔄 Navigated to image ${newIndex + 1}/${thumbs.length}`);
}

// SIMPLE CLICK ZOOM
lightboxImg.addEventListener('click', function(e) {
    // If we were dragging, don't zoom
    if (isDragging) {
        isDragging = false;
        updateLightboxCursor();
        return;
    }
    
    e.stopPropagation();
    
    if (e.shiftKey) {
        // Shift + Click = ZOOM OUT
        const newZoom = Math.max(currentZoomLevel - 0.2, MIN_ZOOM);
        setZoomLevel(newZoom);
        console.log(`🔍 Zoomed OUT to ${(newZoom * 100).toFixed(0)}%`);
    } else {
        // Regular Click = ZOOM IN
        const newZoom = Math.min(currentZoomLevel + 0.2, MAX_ZOOM);
        setZoomLevel(newZoom);
        console.log(`🔍 Zoomed IN to ${(newZoom * 100).toFixed(0)}%`);
    }
});

// DRAG FUNCTIONALITY
lightboxImg.addEventListener('mousedown', function(e) {
    if (e.button === 0) { // Left click only
        isDragging = true;
        dragStartX = e.clientX - currentTranslateX;
        dragStartY = e.clientY - currentTranslateY;
        lightboxImg.style.cursor = 'grabbing';
        e.preventDefault();
    }
});

lightboxImg.addEventListener('mousemove', function(e) {
    if (!isDragging) return;
    
    currentTranslateX = e.clientX - dragStartX;
    currentTranslateY = e.clientY - dragStartY;
    
    lightboxImg.style.transform = `translate(${currentTranslateX}px, ${currentTranslateY}px)`;
});

lightboxImg.addEventListener('mouseup', function(e) {
    if (e.button === 0) {
        isDragging = false;
        updateLightboxCursor();
    }
});

lightboxImg.addEventListener('mouseleave', function() {
    isDragging = false;
    updateLightboxCursor();
});

// Click featured image to open lightbox
document.getElementById('featuredImg').addEventListener('click', function() {
    const activeThumb = document.querySelector('.thumbnail-item.active');
    const highResSrc = activeThumb.getAttribute('data-highres') || this.src;
    
    lightboxImg.src = highResSrc; 
    
    lightboxImg.onload = function() {
        const fitZoom = getFitToScreenZoom();
        setZoomLevel(fitZoom);
        
        // Show controls when lightbox opens (if not hidden by user)
        if (localStorage.getItem('controlsVisible') !== 'false') {
            document.getElementById('controlsFooter').classList.add('visible');
            controlsVisible = true;
        }
    };

    lightbox.style.display = 'flex';
    document.body.style.overflow = 'hidden';
});

// Close lightbox when clicking X button
document.querySelector('.lightbox-close').addEventListener('click', closeLightbox);

// Close lightbox when clicking background
lightbox.addEventListener('click', function(e) {
    if (e.target === lightbox) {
        closeLightbox();
    }
});

// Close with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeLightbox();
    }
});

// Update cursor based on Shift key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Shift') {
        lightboxImg.classList.add('zoom-out');
        updateLightboxCursor();
    }
});

document.addEventListener('keyup', function(e) {
    if (e.key === 'Shift') {
        lightboxImg.classList.remove('zoom-out');
        updateLightboxCursor();
    }
});

// Combined keyboard shortcuts with navigation
document.addEventListener('keydown', function(e) {
    if (lightbox.style.display === 'flex') {
        if (e.key === '1') {
            setZoomLevel(1.0);
            e.preventDefault();
        } else if (e.key === '0') {
            const fitZoom = getFitToScreenZoom();
            setZoomLevel(fitZoom);
            e.preventDefault();
        } else if (e.key === '+' || e.key === '=') {
            const newZoom = Math.min(currentZoomLevel + 0.2, MAX_ZOOM);
            setZoomLevel(newZoom);
            e.preventDefault();
        } else if (e.key === '-' || e.key === '_') {
            const newZoom = Math.max(currentZoomLevel - 0.2, MIN_ZOOM);
            setZoomLevel(newZoom);
            e.preventDefault();
        } else if (e.key === 'h' || e.key === 'H') {
            toggleControls();
            e.preventDefault();
        } else if (e.key === 'ArrowRight') {
            navigateThumbnails(1); // Next image
            e.preventDefault();
        } else if (e.key === 'ArrowLeft') {
            navigateThumbnails(-1); // Previous image
            e.preventDefault();
        }
    } else {
        if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
            navigateThumbnails(e.key === 'ArrowRight' ? 1 : -1);
            e.preventDefault();
        } else if (e.key === 'h' || e.key === 'H') {
            toggleControls();
            e.preventDefault();
        }
    }
});

// Gallery navigation arrow functionality
document.querySelector('.gallery-prev').addEventListener('click', function() {
    navigateThumbnails(-1);
});

document.querySelector('.gallery-next').addEventListener('click', function() {
    navigateThumbnails(1);
});

// Update the navigateThumbnails function (if needed)
function navigateThumbnails(direction) {
    const thumbs = document.querySelectorAll('.thumbnail-item');
    const currentActive = document.querySelector('.thumbnail-item.active');
    let currentIndex = Array.from(thumbs).indexOf(currentActive);
    
    // Calculate new index
    let newIndex = currentIndex + direction;
    if (newIndex < 0) newIndex = thumbs.length - 1; // Wrap to last
    if (newIndex >= thumbs.length) newIndex = 0; // Wrap to first
    
    // Update active thumbnail and featured image
    const newThumb = thumbs[newIndex];
    const imageSrc = newThumb.getAttribute('data-image');
    const cropPosition = newThumb.getAttribute('data-crop') || '50% 14%';
    
    // Update featured image
    const featuredImg = document.getElementById('featuredImg');
    featuredImg.src = imageSrc;
    featuredImg.style.objectPosition = cropPosition;
    
    // Update active states
    thumbs.forEach(thumb => thumb.classList.remove('active'));
    newThumb.classList.add('active');
    
    console.log(`🔄 Navigated to image ${newIndex + 1}/${thumbs.length}`);
}

// Controls Footer
let controlsVisible = true;

function toggleControls() {
    const controlsFooter = document.getElementById('controlsFooter');
    controlsVisible = !controlsVisible;
    
    if (controlsVisible) {
        controlsFooter.classList.add('visible');
        controlsFooter.classList.remove('hidden');
    } else {
        controlsFooter.classList.add('hidden');
        controlsFooter.classList.remove('visible');
    }
    
    localStorage.setItem('controlsVisible', controlsVisible);
}

// Load saved preference
document.addEventListener('DOMContentLoaded', function() {
    const savedVisibility = localStorage.getItem('controlsVisible');
    if (savedVisibility === 'false') {
        controlsVisible = false;
        document.getElementById('controlsFooter').classList.add('hidden');
    }
});
	</script>
</body>
</html>